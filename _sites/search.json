[
  {
    "objectID": "Descriptive statistics.html",
    "href": "Descriptive statistics.html",
    "title": "Phân tích mô tả sử dụng R",
    "section": "",
    "text": "ImportantƯu điểm\n\n\n\n\nHạn chế sai sót, tiết kiệm thời gian/công sức bằng cách xuất trực tiếp bảng kết quả đưa vào bài báo/luận văn\nKhông điền thủ công: Không cần phải phân tích cho từng biến số và chuyển kết quả vào bảng một cách thủ công.\n\n\n\n\n\n\n\n\n\n\nNoteCác bước thực hiện\n\n\n\n\nLàm quen với dataset (Mô tả ngắn gọn)\nLoading packages\nLoading dataset\nThực hiện một số bước cần thiết để mã hóa dữ liệu\nPhân tích kết quả và xuất ra file Word (.docX)\n\n\n\n\n1. Mô tả dataset\nTrong phần phân tích ngày hôm nay, chúng ta sẽ sử dụng bộ số liệu được public trên tạp chí (Link) về nhiễm HIV ở phụ nữ có hoạt động mại dâm.Các datasets liên quan đến bài báo này được công bố kèm theo bài báo này. Phần phân tích này sử dụng dataset có tên data_file_Table_1.csv. Phần mô tả cụ thể của dataset này như sau (Theo công bố trong bài báo):\n\n\n\n\n\n\n\n\nVariable name (Tên biến)\nVariable description (Mô tả)\nCodes (Mã hóa)\n\n\n\n\nunique\nSubject identification number\nNumeric\n\n\nq103\nNationality\n1 = Benin, 2 = Ghana, 3 = Nigeria, 4 = Togo, 5 = Others\n\n\nage\nAge in years\nNumeric\n\n\nage_3cat\nAge in years (categories)\n1 = 18–24; 2 = 25–34; 3 = ≥ 35\n\n\nq105\nEducation\n0 = Not educated; 1 = Primary; 2 = Secondary; 3 = Postsecondary, university\n\n\nq114\nMarital status\n1 = Married; 2 = Single; 3 = Divorced; 4 = Widowed\n\n\nq107\nPlace of work\n1 = Brothel; 2 = Home; 3 = Bars; 4 = Hotels; 5 = Street; 6 = Nightclub; 7 = Others\n\n\nduree\nDuration in sex work (months)\nNumeric\n\n\nq205\nNumber of clients (last 7 days of work)\nNumeric\n\n\nq219\nNumber of sexual intercourses (last 3 days)\nNumeric\n\n\nconstante\nConsistent condom use with clients (last 7 days of work)\n1 = Yes; 2 = No\n\n\nq211\nCondom use with last client\n1 = Yes; 2 = No\n\n\ngroupe\nHIV/treatment status\n1 = HIV positive, treated; 2 = HIV positive, not treated; 3 = HIV negative\n\n\nanal\nEver had anal sex (any partner)\n1 = No; 2 = Yes\n\n\nhla9\nEver had oral sex (any partner)\n1 = Yes; 2 = No\n\n\ngono\nNG prevalence\n1 = Positive; 2 = Negative; 9 = No answer\n\n\nchlam\nCT prevalence\n1 = Positive; 2 = Negative; 9 = No answer\n\n\ngonochlam\nNG/CT prevalence\n1 = Positive; 2 = Negative; 9 = No answer\n\n\ncd4_nb\nCD4 cell count/mm³\nNumeric\n\n\ncharge_virale_copies\nViral load\nNumeric\n\n\n\n\n\n2. Loading packages\nChúng ta sẽ sử dụng một vài packages: gmodels, dplyr, psych, gtsummary, readxl, readr, finalfit, flextable.\n\n# Check whether pacman is available and install if needed\noptions(repos = c(CRAN = \"https://cloud.r-project.org\"))\nif (!requireNamespace(\"pacman\", quietly = TRUE)) install.packages(\"pacman\")\n\n# Use pacman to install (if needed) and load the required packages\npacman::p_load(gmodels, dplyr, psych, gtsummary, readxl,readr,finalfit,flextable)\n\n\n\n3. Loading dataset\nChúng ta có thể load dataset này vào R để phân tích:\n\n# Read CSV \nhiv_tab_1_data &lt;- read_csv(file.path(data_folder, \"data_file_Table_1.csv\"))\n\n# Inspect the structure of the dataset\nstr(hiv_tab_1_data)\n\nspc_tbl_ [319 × 20] (S3: spec_tbl_df/tbl_df/tbl/data.frame)\n $ unique              : chr [1:319] \"D001T\" \"D002T\" \"D003T\" \"D004T\" ...\n $ q103                : num [1:319] 2 1 4 2 4 2 2 3 1 4 ...\n $ age                 : num [1:319] 47 51 42 44 49 45 51 25 44 44 ...\n $ age_3cat            : num [1:319] 3 3 3 3 3 3 3 2 3 3 ...\n $ q105                : num [1:319] 1 1 0 1 0 1 0 1 0 1 ...\n $ q114                : num [1:319] 3 3 2 4 3 2 2 2 2 2 ...\n $ q107                : num [1:319] 5 5 1 1 5 1 1 1 2 1 ...\n $ duree               : num [1:319] 48 180 60 36 24 60 180 72 48 120 ...\n $ q205                : num [1:319] 19 32 72 35 54 11 27 13 1 19 ...\n $ q219                : num [1:319] 12 14 38 14 28 9 13 9 0 13 ...\n $ constante           : num [1:319] 1 2 1 1 1 2 1 1 1 1 ...\n $ q211                : num [1:319] 1 1 1 1 1 1 1 1 1 1 ...\n $ groupe              : num [1:319] 1 1 1 1 1 1 1 1 1 1 ...\n $ anal                : num [1:319] 1 1 1 1 1 1 1 1 1 1 ...\n $ hla9                : num [1:319] 2 2 2 2 2 2 2 2 2 2 ...\n $ gono                : num [1:319] 1 2 2 1 2 2 2 2 2 2 ...\n $ chlam               : num [1:319] 2 2 2 2 2 2 2 2 2 2 ...\n $ gonochlam           : num [1:319] 1 2 2 1 2 2 2 2 2 2 ...\n $ cd4_nb              : num [1:319] 219 297 191 464 525 145 263 710 734 280 ...\n $ charge_virale_copies: num [1:319] 50 50 1683 848 50 ...\n - attr(*, \"spec\")=\n  .. cols(\n  ..   unique = col_character(),\n  ..   q103 = col_double(),\n  ..   age = col_double(),\n  ..   age_3cat = col_double(),\n  ..   q105 = col_double(),\n  ..   q114 = col_double(),\n  ..   q107 = col_double(),\n  ..   duree = col_double(),\n  ..   q205 = col_double(),\n  ..   q219 = col_double(),\n  ..   constante = col_double(),\n  ..   q211 = col_double(),\n  ..   groupe = col_double(),\n  ..   anal = col_double(),\n  ..   hla9 = col_double(),\n  ..   gono = col_double(),\n  ..   chlam = col_double(),\n  ..   gonochlam = col_double(),\n  ..   cd4_nb = col_double(),\n  ..   charge_virale_copies = col_double()\n  .. )\n - attr(*, \"problems\")=&lt;externalptr&gt; \n\n\n\n\n\n\n\n\nNoteNotes\n\n\n\nHầu hết tất cả các biến trong dataset này đều là dạng num(numeric), trừ biến unique. Như vậy để phù hợp với dạng dữ liệu được mô tả theo bảng ở trên (theo bài báo công bố), một số biến sẽ cần biến đổi thành factor(Biến phân loại/nhị phân)\n\n\n\n\n4. Biến đổi/Mã hóa dữ liệu\n\nChuyển một số biến sang dạng factor\n\n# Convert to factors ----\nfactor_vars &lt;- c(\n  \"q103\", \"age_3cat\", \"q105\", \"q114\", \"q107\",\n  \"constante\", \"q211\", \"groupe\", \"anal\", \"hla9\",\n  \"gono\", \"chlam\", \"gonochlam\")\n\nhiv_tab_1_data[factor_vars] &lt;- lapply(hiv_tab_1_data[factor_vars], as.factor)\n\n\n\nGán nhãn giá trị\nGán nhãn giá trị cho các biến (theo bảng mô tả các biến ở trên)\n\n#Labeling for values of variables ----\nlevels(hiv_tab_1_data$q103)=c(\"Benin\",\"Ghana\",\"Nigeria\", \"Togo\", \"Others\")\nlevels(hiv_tab_1_data$age_3cat)=c(\"18 - 24\",\"25 - 34\",\"&gt;=35\")\nlevels(hiv_tab_1_data$q105)=c(\"Not educated\",\"Primary\",\"Secondary\",\n                              \"Postsecondary, university\")\nlevels(hiv_tab_1_data$q114)=c(\"Married\",\"Single\",\"Divorced\", \"Widowed\")\nlevels(hiv_tab_1_data$q107)=c(\"Brothel\",\"Home\",\"Bars\", \"Hotels\",\"Street\",\n                              \"Nightclub\",\"Others\")\nlevels(hiv_tab_1_data$constante)=c(\"Yes\",\"No\")\nlevels(hiv_tab_1_data$q211)=c(\"Yes\",\"No\")\nlevels(hiv_tab_1_data$groupe)=c(\"HIV positive, treated\",\n                                \"HIV positive, not treated\", \"HIV negative\")\nlevels(hiv_tab_1_data$anal)=c(\"No\",\"Yes\")\nlevels(hiv_tab_1_data$hla9)=c(\"Yes\",\"No\")\nlevels(hiv_tab_1_data$gono)=c(\"Positive\",\"Negative\", \"No answer\")\nlevels(hiv_tab_1_data$chlam)=c(\"Positive\",\"Negative\", \"No answer\")\nlevels(hiv_tab_1_data$gonochlam)=c(\"Positive\",\"Negative\", \"No answer\")\n\n\n\n\n5. Phân tích kết quả và xuất file\nĐể có bảng kết quả (Bảng 1) như trong bài báo đã công bố, chúng ta thực hiện như sau:\n\n#Table 1. Baseline characteristics  ----\ndes_table1 &lt;- hiv_tab_1_data |&gt;\n  tbl_summary(\n    include = c(q103, age, age_3cat, q105, q114, q107, duree, q205, q219,\n                constante, q211, groupe, anal, hla9, gono, chlam, gonochlam,\n                cd4_nb, charge_virale_copies),\n    type = list(\n      all_continuous() ~ \"continuous2\"\n    ),\n    statistic = all_continuous() ~ c(\"{median} ({p25}, {p75})\"),\n    percent = \"column\",\n    label = list(\n      q103 ~ \"Nationality\",\n      age ~ \"Age in years\",\n      age_3cat ~ \"Age in years (categories)\",\n      q105 ~ \"Education\",\n      q114 ~ \"Marital status\",\n      q107 ~ \"Place of work\",\n      duree ~ \"Duration in sex work, months\",\n      q205 ~ \"Number of clients, last 7 days of work\",\n      q219 ~ \"Number of sexual intercourses, last 3 days\",\n      constante ~ \"Consistent condom use with clients (last 7 days of work)\",\n      q211 ~ \"Condom use with last client\",\n      groupe ~ \"HIV/treatment status\",\n      anal ~ \"Ever had anal sex (any partner)\",\n      hla9 ~ \"Ever had oral sex (any partner)\",\n      gono ~ \"NG prevalence\",\n      chlam ~ \"CT prevalence\",\n      gonochlam ~ \"NG/CT prevalence\",\n      cd4_nb ~ \"CD4 cell count/mm³\",\n      charge_virale_copies ~ \"Viral load\"\n    ),\n    digits = list(\n      all_continuous() ~ 2,\n      all_categorical() ~ 1\n    ),\n    missing = \"no\"\n  ) %&gt;%\n  modify_header(label = \"**Variable**\") |&gt;         # change label column header\n  modify_caption(\"**Table 1. Baseline characteristics of 319 female sex workers,\n                 Cotonou, Benin, 2008–2012**\")   # add table name/title\ndes_table1\n\n\n\n\n\nTable 1. Baseline characteristics of 319 female sex workers, Cotonou, Benin, 2008–2012\n\n\n\n\n\n\nVariable\nN = 3191\n\n\n\n\nNationality\n\n\n\n\n    Benin\n123.0 (38.6%)\n\n\n    Ghana\n49.0 (15.4%)\n\n\n    Nigeria\n66.0 (20.7%)\n\n\n    Togo\n74.0 (23.2%)\n\n\n    Others\n7.0 (2.2%)\n\n\nAge in years\n\n\n\n\n    Median (Q1, Q3)\n34.00 (27.00, 41.00)\n\n\nAge in years (categories)\n\n\n\n\n    18 - 24\n48.0 (15.0%)\n\n\n    25 - 34\n112.0 (35.1%)\n\n\n    &gt;=35\n159.0 (49.8%)\n\n\nEducation\n\n\n\n\n    Not educated\n107.0 (33.5%)\n\n\n    Primary\n126.0 (39.5%)\n\n\n    Secondary\n79.0 (24.8%)\n\n\n    Postsecondary, university\n7.0 (2.2%)\n\n\nMarital status\n\n\n\n\n    Married\n21.0 (6.6%)\n\n\n    Single\n102.0 (32.0%)\n\n\n    Divorced\n149.0 (46.7%)\n\n\n    Widowed\n47.0 (14.7%)\n\n\nPlace of work\n\n\n\n\n    Brothel\n126.0 (39.6%)\n\n\n    Home\n24.0 (7.5%)\n\n\n    Bars\n37.0 (11.6%)\n\n\n    Hotels\n40.0 (12.6%)\n\n\n    Street\n76.0 (23.9%)\n\n\n    Nightclub\n6.0 (1.9%)\n\n\n    Others\n9.0 (2.8%)\n\n\nDuration in sex work, months\n\n\n\n\n    Median (Q1, Q3)\n36.00 (16.00, 60.00)\n\n\nNumber of clients, last 7 days of work\n\n\n\n\n    Median (Q1, Q3)\n13.00 (5.00, 26.00)\n\n\nNumber of sexual intercourses, last 3 days\n\n\n\n\n    Median (Q1, Q3)\n5.00 (1.00, 11.00)\n\n\nConsistent condom use with clients (last 7 days of work)\n246.0 (77.1%)\n\n\nCondom use with last client\n279.0 (87.5%)\n\n\nHIV/treatment status\n\n\n\n\n    HIV positive, treated\n49.0 (15.4%)\n\n\n    HIV positive, not treated\n82.0 (25.7%)\n\n\n    HIV negative\n188.0 (58.9%)\n\n\nEver had anal sex (any partner)\n16.0 (5.0%)\n\n\nEver had oral sex (any partner)\n62.0 (19.4%)\n\n\nNG prevalence\n\n\n\n\n    Positive\n13.0 (4.1%)\n\n\n    Negative\n301.0 (94.4%)\n\n\n    No answer\n5.0 (1.6%)\n\n\nCT prevalence\n\n\n\n\n    Positive\n9.0 (2.8%)\n\n\n    Negative\n305.0 (95.6%)\n\n\n    No answer\n5.0 (1.6%)\n\n\nNG/CT prevalence\n\n\n\n\n    Positive\n21.0 (6.6%)\n\n\n    Negative\n293.0 (91.8%)\n\n\n    No answer\n5.0 (1.6%)\n\n\nCD4 cell count/mm³\n\n\n\n\n    Median (Q1, Q3)\n389.00 (214.50, 583.00)\n\n\nViral load\n\n\n\n\n    Median (Q1, Q3)\n8,153.00 (154.00, 31,321.00)\n\n\n\n1 n (%)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nNoteBảng kết quả có thể xuất ra file word\n\n\n\n\ndes_table1 |&gt;\n as_flex_table() |&gt;\n save_as_docx(path = \"Table 1. Baseline characteristics.docx\")",
    "crumbs": [
      "Basics"
    ]
  }
]